<ion-content fullscreen="true">
    <div class="title-chip">
        <div class="chip-icon-wrapper">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="chip-icon">
                <path d="M12 3v10.55A4 4 0 1 0 14 17V7h4V3h-6z" />
            </svg>
        </div>
        <span class="chip-text">Tunzo</span>
    </div>
    <div class="settings-button" routerLink="settings" (click)="callnoti()">
        <svg class="gear-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <defs>
            <linearGradient id="gearGradientRight" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="#00ffc6" />
                <stop offset="100%" stop-color="#0083B0" />
            </linearGradient>
        </defs>
        <path fill="none" stroke="url(#gearGradientRight)" stroke-width="1.5" stroke-linecap="round"
        stroke-linejoin="round" d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" />
        <path fill="none" stroke="url(#gearGradientRight)" stroke-width="1.5" stroke-linecap="round"
        stroke-linejoin="round"
        d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" />
    </svg>
    </div>
    @if(loading()) {
    <!-- Skeleton for featured hero -->
    <div class="hero-section">
        <ion-skeleton-text animated style="width: 100%; height: 280px; border-radius: 16px;"></ion-skeleton-text>
        <div style="margin-top: 12px;">
            <ion-skeleton-text animated style="width: 60%; height: 24px;"></ion-skeleton-text>
            <ion-skeleton-text animated style="width: 40%; height: 18px; margin-top: 8px;"></ion-skeleton-text>
        </div>
    </div>
    <!-- Skeleton for trending carousel -->
    <div class="section">
        <div class="scroll-row premium-scroll">
            @for(i of [1,2,3,4,5]; track i) {
            <ion-skeleton-text animated style="min-width: 100px; height: 100px; border-radius: 12px; margin-right: 12px;">
            </ion-skeleton-text>
            }
        </div>
    </div>
    <!-- Skeleton for recently played -->
    <div class="section">
        @for(i of [1,2,3,4]; track i) {
        <ion-skeleton-text animated style="width: 100%; height: 48px; border-radius: 8px; margin-bottom: 8px;">
        </ion-skeleton-text>
        }
    </div>
    <!-- Skeleton for all songs list -->
    <div class="section">
        <ion-list>
            @for(i of [1,2,3,4,5,6,7,8,9,10]; track i) {
            <ion-item>
                <ion-skeleton-text animated style="width: 44px; height: 44px; border-radius: 8px;" slot="start"></ion-skeleton-text>
                <ion-label>
                    <ion-skeleton-text animated style="width: 80%; height: 18px;"></ion-skeleton-text>
                    <ion-skeleton-text animated style="width: 60%; height: 14px; margin-top: 6px;"></ion-skeleton-text>
                </ion-label>
            </ion-item>
            }
        </ion-list>
    </div>
    } @else {




    <!-- Featured Hero Section -->
    <div class="hero-section">
        <div class="hero-gradient"></div>
        <div class="album-glow"></div>
        <div class="hero-overlay"></div>
        <img [src]="results()[0]?.image?.[2]?.url" alt="Featured" class="hero-art" />
        <div class="hero-info">
            <div class="badge">FEATURED</div><br>
            <ion-note>{{results()[0]?.copyright}}</ion-note>
            <h2>{{results()[0]?.name}}</h2>
            <p>{{results()[0]?.artists?.primary?.[0]?.name}} - {{results()[0]?.playCount}} Views</p>

            <div class="hero-actions">
                <button class="play-hero-btn" (click)="playSong(results()[0])">
                    <span class="material-icons play-icon">play_arrow</span>
                    <span>Play Now</span>
                </button>
                <button class="favorite-btn" color="primary">
                    <span class="material-icons">favorite_border</span>
                </button>
            </div>
        </div>
    </div>
    <app-ai-content 
      [isShowHeading]="true" 
      [isShowContent]="false" 
      [prompt]="aiPrompt">
    </app-ai-content>

    <!-- Trending Carousel -->
    <div class="section">
        <div class="section-header">
            <h3>Trending Now</h3>
            <a href="#" class="see-all">See All</a>
        </div>
        <div class="scroll-row premium-scroll">
            @for(song of results().slice(1,6); track song.id) {
            <div class="album-card" (click)="playSong(song)">
                <div class="album-gradient"></div>
                <div class="album-glow"></div>
                <div class="album-badge">
                    <span class="material-icons">trending_up</span>
                </div>
                <img [src]="song.image?.[2]?.url" class="album-art" />
                <div class="album-meta">
                    <span class="title">{{song.name}}</span>
                    <span class="artist">{{song.artists?.primary?.[0]?.name}}</span>
                </div>
                <div class="album-hover">
                    <span class="material-icons play-icon">play_arrow</span>
                </div>
            </div>
            }
        </div>
    </div>

    <!-- Recently Played -->
    <div class="section">
        <div class="section-header">
            <h3>Recently Played</h3>
            <a href="#" class="see-all">See All</a>
        </div>
        <div class="recently-played">
            @for(song of results().slice(6,10); track song.id) {
            <div class="recent-track" (click)="playSong(song)">
                <div class="track-number">{{$index + 1}}</div>
                <img [src]="song?.image?.[1]?.url" class="recent-art" />
                <div class="recent-info">
                    <div class="recent-title">{{song.name}}</div>
                    <div class="recent-artist">{{song.artists?.primary?.[0]?.name}}</div>
                </div>
                <div class="recent-time">3:42</div>
                <button id="click-trigger" class="recent-more" (click)="$event.stopPropagation();">
                    <span class="material-icons">more_vert</span>
                </button>

            </div>
            }
        </div>
    </div>

    <!-- All Songs List -->
    <div class="section">
        <div class="section-header">
            <h3>All Songs</h3>
            <a href="#" class="see-all">See All</a>
        </div>
        <ion-list class="premium-list">
            @for(song of results().slice(10); track song.id) {
            <ion-item lines="none" class="premium-item" (click)="playSong(song)">
                <!-- <div class="item-number">{{$index + 1}}</div> -->
                <img slot="start" [src]="song?.image?.[1]?.url" class="list-art" />
                <ion-label class="list-label">
                    <div class="list-title">{{song.name}}</div>
                    <div class="list-artist">{{song.artists?.primary?.[0]?.name}} - {{song.year}}</div>
                </ion-label>
                <span slot="end" class="material-icons list-play">play_arrow</span>
            </ion-item>
            }
        </ion-list>
    </div>
    }
</ion-content>

@if(player.getCurrentSong()) {
<app-music-controls></app-music-controls>
}