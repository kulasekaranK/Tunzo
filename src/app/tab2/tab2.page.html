<ion-header class="search-header ion-no-border" mode="ios" translucent="true">
    <ion-toolbar>
    </ion-toolbar>
</ion-header>

<ion-content class="search-page" fullscreen="true">

    <!-- Hero Section -->
    <div class="hero-text">
        <h1>Discover Music</h1>
        <p>Find your favorite tracks, albums & artists</p>
    </div>

    <!-- Search Bar -->
    <ion-searchbar placeholder="Search songs, albums, or artists..." debounce="400" [(ngModel)]="searchQuery" class="modern-searchbar">
    </ion-searchbar>

    <!-- Category Chips -->
    <div class="chip-row ion-margin">
        @for (chip of chips; track chip) {
        <div class="chip" (click)="selectChip(chip)">
            <span>{{ chip }}</span>
        </div>
        }
    </div>

    <!-- Loading -->
    @if (loading()) {
    <div class="ion-text-center">
        <ion-spinner name="crescent" class="loading-spinner"></ion-spinner>
    </div>
    }

    <!-- Results -->
    @if (results().length) {
    <div class="results-list ion-padding">
        <h2 class="section-title">Results</h2>
        @for (song of results(); track song.id) {
        <div class="song-row">
            <!-- Album Cover -->
            <img [src]="song.image?.[1]?.url || song.image?.[0]?.url" alt="cover" />

            <!-- Song Details -->
            <div class="details">
                <h3 class="title">{{ song.name }}</h3>
                <p class="subtitle">{{ song.album?.name }}</p>
                <ion-note>{{ song.year }}</ion-note>
            </div>

            <!-- Play Button -->
            <button class="play-btn" (click)="playSong(song)">
          <span class="material-icons">play_arrow</span>
        </button>

            <!-- Add to Queue Button -->
            <button class="play-btn queue-btn" (click)="addToQueue(song)">
          <span class="material-icons">queue_music</span>
        </button>
        </div>
        }
    </div>
    } @else {
    <div class="empty-state">
        <ion-icon name="musical-notes-outline" size="large"></ion-icon>
        <h3>No songs found</h3>
        <p>Try searching with another keyword or explore trending music.</p>
    </div>
    }
</ion-content>

@if (player.getCurrentSong()) {
<app-music-controls></app-music-controls>
}